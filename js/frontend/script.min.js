jQuery(document).ready(function(a){var b={init:function(){a("a.tajer-remove-frontend-product").off("click").on("click",this.deleteProduct),a("a.tajer-remove-label").off("click").on("click",this.deleteLabel),a(".ui.dropdown").tajerdropdown({action:"nothing"})},deleteLabel:function(){a(this).remove()},deleteProduct:function(b){b.preventDefault();var c=a(this),d=c.attr("data-nonce"),e=c.attr("data-id"),f={action:"tajer_remove_user_product_from_frontend",nonce:d,user_product_id:e},g=a.param(f);swal({title:Tajer.delete_warning_message,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:Tajer.delete_warning_confirmation_button_text,closeOnConfirm:!1},function(){a.ajax({url:Tajer.ajaxurl,type:"POST",data:g,success:function(a){c.closest("tr").remove(),swal({title:Tajer.success_delete_header_text,text:Tajer.success_delete_message_text,timer:1e3,type:"success",showConfirmButton:!0})}})})}};b.init()}),jQuery(document).ready(function(a){var b=a(".tajer_remove_from_cart"),c=a("form#tajer_checkout_form"),d={init:function(){this.spinner(),this.checkbox(),this.getPaymentGatewayFormDetails(),b.off("click").on("click",this.removeFromCart),a("button#tajer_validate_coupon").off("click").on("click",this.applyCoupon),a("input[type='radio'][name='payment-mode']").on("change",this.getPaymentGatewayFormDetails),a("#tajer_purchase_form_submit_button").on("click",this.checkout),c.on("tajer_form_loaded",this.afterLoadingTheFormViaAjax),a(".tajer_quantity_field").on("spinchange",this.quantityChanged),a("button.tajer_empty_cart").off("click").on("click",this.emptyCart)},checkbox:function(){a(".Tajer .ui.checkbox").checkbox()},afterLoadingTheFormViaAjax:function(){a("#tajer_purchase_form_submit_button").on("click",d.checkout),a(".Tajer .ui.dropdown").tajerdropdown(),a(".message .close").on("click",function(){a(this).closest(".message").transition("fade"),a("#tajer_purchase_form_details").find(".wide").removeClass("error")})},getPaymentGatewayFormDetails:function(){var b=a("div#tajer_purchase_form_details");if(b.length){var d="tajer_get_payment_gateway_form_details",e=a("input[name=payment-mode]:checked"),f=a("#tajer_payment_method_selection"),g={action:d},h=c.serialize()+"&"+a.param(g);b.empty(),f.dimmer("show"),a.ajax({url:Tajer.ajaxurl,type:"POST",data:h,success:function(d){var g=d.match(/\[tajer_json\](\{.+\})\[\/tajer_json\]/);if(d=a.parseJSON(g[1]),d.form_action)c.attr("action",d.form_action);else if(e.length){var h=a(location).attr("href");h.indexOf("?")>=0?c.attr("action",h+"&payment-mode="+e.val()):c.attr("action",h+"?payment-mode="+e.val())}b.append(d.form_fields),f.dimmer("hide"),c.trigger("tajer_form_loaded")}})}},applyCoupon:function(b){if(b.preventDefault(),""!=a("#tajer_input_discount").val()){var d="tajer_apply_coupon",e=a(this),f=a(".tajer_quantity_field"),g=f.length?f.spinner("value"):1,h={action:d,quantity:g},i=c.serialize()+"&"+a.param(h);e.addClass("loading"),a.ajax({url:Tajer.ajaxurl,type:"POST",data:i,success:function(b){var c=b.match(/\[tajer_json\](\{.+\})\[\/tajer_json\]/);b=a.parseJSON(c[1]),e.removeClass("loading"),a("span#tajer-discount-error-wrap").text(""),a.each(b.status,function(c,d){"error"==d&&a("span#tajer-discount-error-wrap").append(b.message[c])}),a("span.tajer_total_price").find("span").text(b.user_total)}})}},checkout:function(b){var d=a("#tajer_purchase_form_details");d.find(".wide").removeClass("error");var e="tajer_checkout";b.preventDefault();var f=a(this),g=a(".tajer_quantity_field"),h=g.length?g.spinner("value"):1,i={action:e,quantity:h},j=c.serialize()+"&"+a.param(i);f.addClass("loading"),a.ajax({url:Tajer.ajaxurl,type:"POST",data:j,success:function(b){var c=b.match(/\[tajer_json\](\{.+\})\[\/tajer_json\]/);if(b=a.parseJSON(c[1]),f.removeClass("loading"),b.errors){var e=a("#tajer_purchase_form_errors");e.empty(),a.each(b.errors,function(b,c){d.find("*[name='"+b+"']").closest(".wide").addClass("error"),a("<li>"+c+"</li>").appendTo(e)}),e.closest(".message").removeClass("hidden").show()}if(b.success){var g=a("#tajer_purchase_form_success_message");g.find(".header").text(b.success.header).end().find("p").text(b.success.body),g.removeClass("hidden")}b.redirect_to&&(window.location.href=b.redirect_to)}})},emptyCart:function(){var b=a(this),c=b.attr("data-nonce"),d={action:"tajer_empty_cart",nonce:c},e=a.param(d);swal({title:Tajer.delete_warning_message,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:Tajer.delete_warning_confirmation_button_text,closeOnConfirm:!1},function(){a.ajax({url:Tajer.ajaxurl,type:"POST",data:e,success:function(a){swal({title:Tajer.success_delete_header_text,text:Tajer.success_delete_message_text,timer:1e3,type:"success",showConfirmButton:!0}),location.reload(!0)}})})},quantityChanged:function(){var b=a(this),d=b.attr("data-cart-id"),e=b.attr("data-nonce"),f=b.spinner("value");parseInt(f)<=0?(f=1,b.spinner("value",f)):-1!=f.toString().indexOf(".")&&(f=parseInt(f),b.spinner("value",f));var g={action:"tajer_increase_decrease_quantity",nonce:e,coupon:a("input#tajer_input_discount").val(),quantity:f,cart_id:d},h=c.serialize()+"&"+a.param(g),i=a(".tajer-calculator-loader"),j=a("span.tajer_total_price").find("span");j.hide(),i.show(),a.ajax({url:Tajer.ajaxurl,type:"POST",data:h,success:function(b){var c=b.match(/\[tajer_json\](\{.+\})\[\/tajer_json\]/);b=a.parseJSON(c[1]),i.hide(),j.show().text(b.user_total)}})},removeFromCart:function(b){b.preventDefault();var c=a(this),d=c.attr("data-nonce"),e=c.attr("data-id"),f=c.attr("data-sub_id"),g=c.attr("data-cart-id"),h={action:"tajer_remove_from_cart",nonce:d,product_id:e,product_sub_id:f,cart_id:g},i=a.param(h);swal({title:Tajer.delete_warning_message,type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:Tajer.delete_warning_confirmation_button_text,closeOnConfirm:!1},function(){var b=a(".tajer-calculator-loader"),d=a("span.tajer_total_price").find("span");d.hide(),b.show(),a.ajax({url:Tajer.ajaxurl,type:"POST",data:i,success:function(e){c.closest("tr").remove();var f=e.match(/\[tajer_json\](\{.+\})\[\/tajer_json\]/);e=a.parseJSON(f[1]),b.hide(),d.show().text(e.user_total),swal({title:Tajer.success_delete_header_text,text:Tajer.success_delete_message_text,timer:1e3,type:"success",showConfirmButton:!0})}})})},spinner:function(){a(".tajer_quantity_field").spinner({min:1})},refresh:function(){}};d.init()}),function(a){var b=window.location.toString();if(b.indexOf("?")>0&&b.indexOf("tajer_action")>0){var c=b.substring(0,b.indexOf("?"));window.history.replaceState({},document.title,c)}}(jQuery),jQuery(document).ready(function(a){var b=a("form#tajer_checkout_form"),c={init:function(){this.updateQuantity(),a(".tajer_quantity_field").on("spinchange",this.updateQuantity),b.on("tajer_form_loaded",this.updateQuantity)},updateQuantity:function(){var b=a(".tajer_quantity_field"),c=b.length?b.spinner("value"):1;a("input[name='quantity']").val(c)}};c.init()}),jQuery(document).ready(function(a){var b={init:function(){a(".tajer-pricing-widget-submit").on("click",this.submitForm)},submitForm:function(b){b.preventDefault();var c=a(this),d=c.closest("form"),e={action:"tajer_submit_pricing_widget"},f=d.serialize()+"&"+a.param(e);c.addClass("loading"),a.ajax({url:Tajer.ajaxurl,type:"POST",data:f,success:function(b){var e=b.match(/\[tajer_json\](\{.+\})\[\/tajer_json\]/);if(b=a.parseJSON(e[1]),c.removeClass("loading"),"add"!=b.status){"exist"==b.status&&d.find(".tajer-pricing-widget-checkout-link").show(),d.addClass("error"),d.removeClass("success");var f=d.find(".error.message");f.text(b.message),setTimeout(function(){f.empty()},3e3)}else{d.find(".tajer-pricing-widget-checkout-link").show(),d.addClass("success"),d.removeClass("error");var g=d.find(".success.message");g.text(b.message),setTimeout(function(){g.empty()},3e3)}}})}};b.init()}),jQuery(document).ready(function(a){a(".Tajer.tajer-container .image").dimmer({on:"hover"})}),jQuery(document).ready(function(a){var b=a("div.tajer_add_to_cart"),c={init:function(){b.off("click").on("click",this.addRemoveFromCart),this.fixBorderRadius()},addRemoveFromCart:function(){var b=a(this),c=b.attr("data-nonce"),d=b.attr("data-id"),e=b.attr("data-sub_id"),f=b.attr("data-cart-id"),g=a("div#tajer_buttons_notification"),h={action:"tajer_add_to_cart_button",nonce:c,product_id:d,product_sub_id:e,cart_id:f},i=a.param(h);b.addClass("loading"),a.ajax({url:Tajer.ajaxurl,type:"POST",data:i,success:function(c){var d=c.match(/\[tajer_json\](\{.+\})\[\/tajer_json\]/);c=a.parseJSON(d[1]),("error"!=c.status||"login"!=c.status)&&("add"==c.status?(b.find("div.hidden.content").text(Tajer.remove_from_cart_text),b.attr("data-cart-id",c.id)):(b.find("div.hidden.content").text(Tajer.add_to_cart_text),b.attr("data-cart-id",c.id))),g.empty().append(c.message),b.removeClass("loading"),setTimeout(function(){g.empty()},3e3)}})},fixBorderRadius:function(){var b=a(".tajer-vertical-button-group"),c=b.children().length;if(1==c){var d=b.find("div").first(),e=d.css("border-bottom-left-radius");d.css("border-radius",e)}}};c.init()});